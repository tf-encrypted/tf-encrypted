#!/bin/bash
DIRECTORY=`dirname $0`

TFE_NODE_NAME=server0 TFE_MASTER_ADDRESS=localhost:4000 TFE_SERVER0_ADDRESS=localhost:4441 TFE_SERVER1_ADDRESS=localhost:4442 TFE_CRYPTO_PRODUCER_ADDRESS=localhost:4443 TFE_WEIGHTS_PROVIDER_ADDRESS=localhost:4444 $DIRECTORY/serve &
sleep 1
TFE_NODE_NAME=server1 TFE_MASTER_ADDRESS=localhost:4000 TFE_SERVER0_ADDRESS=localhost:4441 TFE_SERVER1_ADDRESS=localhost:4442 TFE_CRYPTO_PRODUCER_ADDRESS=localhost:4443 TFE_WEIGHTS_PROVIDER_ADDRESS=localhost:4444 $DIRECTORY/serve &
sleep 1
TFE_NODE_NAME=crypto_producer TFE_MASTER_ADDRESS=localhost:4000 TFE_SERVER0_ADDRESS=localhost:4441 TFE_SERVER1_ADDRESS=localhost:4442 TFE_CRYPTO_PRODUCER_ADDRESS=localhost:4443 TFE_WEIGHTS_PROVIDER_ADDRESS=localhost:4444 $DIRECTORY/serve &
sleep 1
TFE_NODE_NAME=weights_provider TFE_MASTER_ADDRESS=localhost:4000 TFE_SERVER0_ADDRESS=localhost:4441 TFE_SERVER1_ADDRESS=localhost:4442 TFE_CRYPTO_PRODUCER_ADDRESS=localhost:4443 TFE_WEIGHTS_PROVIDER_ADDRESS=localhost:4444 $DIRECTORY/serve &
sleep 1

# API
GRPC_VERBOSITY=DEBUG TFE_NODE_NAME=master TFE_MASTER_ADDRESS=localhost:4000 TFE_SERVER0_ADDRESS=localhost:4441 TFE_SERVER1_ADDRESS=localhost:4442 TFE_CRYPTO_PRODUCER_ADDRESS=localhost:4443 TFE_WEIGHTS_PROVIDER_ADDRESS=localhost:4444 $DIRECTORY/serve
